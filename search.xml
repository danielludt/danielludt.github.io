<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[PHP loginsignup function]]></title>
    <url>%2F2017%2F08%2F20%2Fphp%20loginsignup%2F</url>
    <content type="text"><![CDATA[use php to build login/signup function logincreate database in mysql1234567891011121314151617&lt;?php// 创建连接$conn = new mysqli("localhost", "uesename", "password");// 检测连接if ($conn-&gt;connect_error) &#123; die("连接失败: " . $conn-&gt;connect_error);&#125; // 创建数据库 $sql = "CREATE DATABASE test"; if ($conn-&gt;query($sql) === TRUE) &#123; echo "数据库创建成功"; &#125; else &#123; echo "Error creating database: " . $conn-&gt;error; &#125; $conn-&gt;close();?&gt; 12345678 $sql = "CREATE TABLE login (id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY,username VARCHAR(30) NOT NULL,password VARCHAR(30) NOT NULL,)ENGINE=InnoDB DEFAULT CHARSET=utf8 ";&lt;?php$SQL = "INSERT INTO login ('id','username','password') VALUES ('7', 'tom', '12345');"?&gt; html structure1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859 &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;用户登录页面&lt;/title&gt; &lt;meta charset="UTF-8"/&gt; &lt;style type="text/css"&gt; *&#123;margin:0px;padding:0px;&#125; ul&#123; width:400px; list-style:none; margin:50px auto; &#125; li&#123; padding:12px; position:relative; &#125; label&#123; width:80px; display:inline-block; float:left; line-height:30px; &#125; input[type='text'],input[type='password']&#123; height:30px; &#125; img&#123; margin-left:10px; &#125; input[type="submit"]&#123; margin-left:80px; padding:5px 10px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="login.php" method="post"&gt; &lt;ul&gt; &lt;li&gt; &lt;label&gt;用户名：&lt;/label&gt; &lt;input type="text" name="username" placeholder="请输入登录账号"/&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;密码：&lt;/label&gt; &lt;input type="password" name="password" placeholder="请输入密码" /&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;验证码：&lt;/label&gt; &lt;input type="text" name="code" size="4" style="float:left"/&gt; &lt;a href="javascript:;" onclick="document.getElementById('captcha_img').src='captcha.php?r='+Math.random()"&gt; &lt;img id="captcha_img" border='1' src='captcha.php?r=echo rand(); ?&gt;' style="width:100px; height:30px" /&gt; &lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;input type="submit" value="登录" /&gt; &lt;/li&gt; &lt;/ul&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; captcha.php12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849 &lt;?php//设置session,必须处于脚本最顶部 session_start(); $image = imagecreatetruecolor(100, 30); //1&gt;设置验证码图片大小的函数 //5&gt;设置验证码颜色 imagecolorallocate(int im, int red, int green, int blue); $bgcolor = imagecolorallocate($image,255,255,255); //#ffffff //6&gt;区域填充 int imagefill(int im, int x, int y, int col) (x,y) 所在的区域着色,col 表示欲涂上的颜色 imagefill($image, 0, 0, $bgcolor); //10&gt;设置变量 $captcha_code = ""; //7&gt;生成随机数字 for($i=0;$i&lt;4;$i++)&#123; //设置字体大小 $fontsize = 6; //设置字体颜色，随机颜色 $fontcolor = imagecolorallocate($image, rand(0,120),rand(0,120), rand(0,120)); //0-120深颜色 //设置数字 $fontcontent = rand(0,9); //10&gt;.=连续定义变量 $captcha_code .= $fontcontent; //设置坐标 $x = ($i*100/4)+rand(5,10); $y = rand(5,10); imagestring($image,$fontsize,$x,$y,$fontcontent,$fontcolor); &#125; //10&gt;存到session $_SESSION['authcode'] = $captcha_code; //8&gt;增加干扰元素，设置雪花点 for($i=0;$i&lt;200;$i++)&#123; //设置点的颜色，50-200颜色比数字浅，不干扰阅读 $pointcolor = imagecolorallocate($image,rand(50,200), rand(50,200), rand(50,200)); //imagesetpixel — 画一个单一像素 imagesetpixel($image, rand(1,99), rand(1,29), $pointcolor); &#125; //9&gt;增加干扰元素，设置横线 for($i=0;$i&lt;4;$i++)&#123; //设置线的颜色 $linecolor = imagecolorallocate($image,rand(80,220), rand(80,220),rand(80,220)); //设置线，两点一线 imageline($image,rand(1,99), rand(1,29),rand(1,99), rand(1,29),$linecolor); &#125; //2&gt;设置头部，image/png header('Content-Type: image/png'); //3&gt;imagepng() 建立png图形函数 imagepng($image); //4&gt;imagedestroy() 结束图形函数 销毁$image imagedestroy($image);?&gt; login.php1234567891011121314151617181920212223242526272829303132333435363738394041 &lt;?php //开启Session session_start(); header("Content-type:text/html;charset=utf-8"); $link = mysqli_connect('localhost','root','root','test'); if (!$link) &#123; die("连接失败:".mysqli_connect_error()); &#125; //接受提交过来的用户名及密码 $username = $_POST["username"];//用户名 $password = $_POST["password"];//密码 $code = $_POST["code"]; //验证码 if($username == "") &#123; //echo "请填写用户名&lt;br&gt;"; echo"&lt;script type='text/javascript'&gt;alert('请填写用户名');location='login.html'; &lt;/script&gt;"; &#125; if($password == "") &#123; //echo "请填写密码&lt;br&gt;&lt;a href='login.html'&gt;返回&lt;/a&gt;"; echo"&lt;script type='text/javascript'&gt;alert('请填写密码');location='login.html';&lt;/script&gt;"; &#125; if($code != $_SESSION['authcode']) //判断填写的验证码是否与验证码PHP文件生成的信息匹配 &#123; echo "&lt;script type='text/javascript'&gt;alert('验证码错误!');location='login.html';&lt;/script&gt;"; &#125; $sql = "select * from login"; $result = mysqli_query($link, $sql); $rows = mysqli_fetch_array($result); if($rows) &#123; //拿着提交过来的用户名和密码去数据库查找，看是否存在此用户名以及其密码 if ($username == $rows["username"] &amp;&amp; $password == $rows["password"]) &#123; //echo "验证成功！&lt;br&gt;"; echo "&lt;script type='text/javascript'&gt;alert('登陆成功');location='success.html';&lt;/script&gt;"; &#125; else &#123; //echo "用户名或者密码错误&lt;br&gt;"; echo "&lt;script type='text/javascript'&gt;alert('用户名或者密码错误');location='login.html';&lt;/script&gt;"; //echo "&lt;a href='login.html'&gt;返回&lt;/a&gt;"; &#125; &#125;?&gt; signupcreate database in mysql123456789101112131415161718192021222324&lt;?php // 创建连接 $conn = new mysqli("localhost", "uesename", "password","test"); // 检测连接 if ($conn-&gt;connect_error) &#123; die("连接失败: " . $conn-&gt;connect_error); &#125; // 使用 sql 创建数据表 $sql = "CREATE TABLE login ( id INT(10) UNSIGNED AUTO_INCREMENT PRIMARY KEY, username VARCHAR(30) NOT NULL, password VARCHAR(30) NOT NULL, confirm VARCHAR(30) NOT NULL, email VARCHAR(30) NOT NULL, )ENGINE=InnoDB DEFAULT CHARSET=utf8 "; if ($conn-&gt;query($sql) === TRUE) &#123; echo "Table MyGuests created successfully"; &#125; else &#123; echo "创建数据表错误: " . $conn-&gt;error; &#125; $conn-&gt;close(); ?&gt; signup.html123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;用户注册页面&lt;/title&gt; &lt;meta charset="UTF-8"/&gt; &lt;style type="text/css"&gt; *&#123;margin:0px;padding:0px;&#125; ul&#123; width:400px; list-style:none; margin:50px auto; &#125; li&#123; padding:12px; position:relative; &#125; label&#123; width:80px; display:inline-block; float:left; line-height:30px; &#125; input[type='text'],input[type='password']&#123; height:30px; &#125; img&#123; margin-left:10px; &#125; input[type="submit"]&#123; margin-left:80px; padding:5px 10px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;form action="signup.php" method="post"&gt; &lt;ul&gt; &lt;li&gt; &lt;label&gt;用户名：&lt;/label&gt; &lt;input type="text" name="username" placeholder="请输入注册账号"/&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;密 码：&lt;/label&gt; &lt;input type="password" name="password" placeholder="请输入密码" /&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;确认密码：&lt;/label&gt; &lt;input type="password" name="confirm" placeholder="请再次输入密码" /&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;邮 箱：&lt;/label&gt; &lt;input type="text" name="email" placeholder="请输入邮箱"/&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;验证码：&lt;/label&gt; &lt;input type="text" name="code" size="4" style="float:left" placeholder="请填写验证码"/&gt; &lt;a href="javascript:;" onclick="document.getElementById('captcha_img').src='captcha.php?r='+Math.random()"&gt; &lt;img id="captcha_img" border='1' src='captcha.php?r=echo rand(); ?&gt;' style="width:100px; height:30px" /&gt; &lt;/a&gt; &lt;/li&gt; &lt;li&gt; &lt;input type="submit" value="注册" /&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/form&gt;&lt;/body&gt; signup.php12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?php session_start(); header("Content-type:text/html;charset=utf-8"); $link = mysqli_connect('localhost','root','root','test'); if (!$link) &#123; die("连接失败:".mysqli_connect_error()); &#125; $username = $_POST['username']; $password = $_POST['password']; $confirm = $_POST['confirm']; $email = $_POST['email']; $code = $_POST['code']; if($username == "" || $password == "" || $confirm == "" || $email == "" || $code == "") &#123; echo "&lt;script&gt;alert('信息不能为空！重新填写');window.location.href='signup.html'&lt;/script&gt;"; &#125; elseif ((strlen($username) &lt; 3)||(!preg_match('/^\w+$/i', $username))) &#123; echo "&lt;script&gt;alert('用户名至少3位且不含非法字符！重新填写');window.location.href='signup.html'&lt;/script&gt;"; //判断用户名长度 &#125;elseif(strlen($password) &lt; 5)&#123; echo "&lt;script&gt;alert('密码至少5位！重新填写');window.location.href='signup.html'&lt;/script&gt;"; //判断密码长度 &#125;elseif($password != $confirm) &#123; echo "&lt;script&gt;alert('两次密码不相同！重新填写');window.location.href='signup.html'&lt;/script&gt;"; //检测两次输入密码是否相同 &#125; elseif (!preg_match('/^[\w\.]+@\w+\.\w+$/i', $email)) &#123; echo "&lt;script&gt;alert('邮箱不合法！重新填写');window.location.href='signup.html'&lt;/script&gt;"; //判断邮箱格式是否合法 &#125; elseif($code != $_SESSION['authcode']) &#123; echo "&lt;script&gt;alert('验证码错误！重新填写');window.location.href='signup.html'&lt;/script&gt;"; //判断验证码是否填写正确 &#125; elseif(mysqli_fetch_array(mysqli_query($link,"select * from login where username = '$username'")))&#123; echo "&lt;script&gt;alert('用户名已存在');window.location.href='signup.html'&lt;/script&gt;"; &#125; else&#123; $sql= "insert into login(username, password, confirm, email)values('$username','$password','$confirm','$email')"; //插入数据库 if(!(mysqli_query($link,$sql)))&#123; echo "&lt;script&gt;alert('数据插入失败');window.location.href='signup.html'&lt;/script&gt;"; &#125;else&#123; echo "&lt;script&gt;alert('注册成功！去登陆');window.location.href='login.html'&lt;/script&gt;"; &#125; &#125;?&gt;``` ### links between login and signup``` html &lt;a href="zhuce.html" style="text-decoration: none; padding-left: 30px;"&gt;注册&lt;/a&gt;]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP comments function]]></title>
    <url>%2F2017%2F08%2F20%2Fphp%20comments%2F</url>
    <content type="text"><![CDATA[use PHP jquery json mysql to build comments function commentsindex.html1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;comments&lt;/title&gt; &lt;style type="text/css"&gt; .demo&#123; width:500px; margin: 0 auto; &#125; h3&#123; font-size:18px &#125; #comments&#123; margin:10px auto &#125; #post&#123; margin-top:10px &#125; #comments p,#post p&#123; line-height:30px &#125; #comments p span&#123; margin:4px; color:#999 &#125; #message&#123; position:relative; display:none; width:100px; padding:4px; margin-top:-100px; margin-left:30px; background: #ff0000; color: #c286ff; z-index:1001 &#125; &lt;/style&gt; &lt;script src="http://cdn.bootcss.com/jquery/1.4.2/jquery.min.js"&gt;&lt;/script&gt; &lt;script type="text/javascript"&gt; $(function()&#123; var comments = $("#comments"); $.getJSON("server.php",function(json)&#123; $.each(json,function(index,array)&#123; var txt = "&lt;p&gt;&lt;strong&gt;"+array["user"]+"&lt;/strong&gt;："+array["comment"]+"&lt;span&gt;"+array["addtime"]+"&lt;/span&gt;&lt;/p&gt;"; comments.append(txt); &#125;); &#125;); $("#add").click(function()&#123; var user = $("#user").val(); var txt = $("#txt").val(); $.ajax(&#123; type: "POST", url: "comment.php", data: "user="+user+"&amp;txt="+txt, success: function(msg)&#123; if(msg==1)&#123; var str = "&lt;p&gt;&lt;strong&gt;"+user+"&lt;/strong&gt;："+txt+"&lt;span&gt;just now&lt;/span&gt;&lt;/p&gt;"; comments.append(str); $("#message").show().html("go!").fadeOut(1000); $("#txt").attr("value",""); &#125;else&#123; $("#message").show().html(msg).fadeOut(1000); &#125; &#125; &#125;); &#125;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div class="demo"&gt; &lt;div id="comments"&gt; &lt;h3&gt;comments list&lt;/h3&gt; &lt;/div&gt; &lt;div id="post"&gt; &lt;h3&gt;comments&lt;/h3&gt; &lt;p&gt;username&lt;/p&gt; &lt;p&gt;&lt;input type="text" class="input" id="user" /&gt;&lt;/p&gt; &lt;p&gt;contents&lt;/p&gt; &lt;p&gt;&lt;textarea class="input" id="txt" style="width:100%; height:80px"&gt;&lt;/textarea&gt;&lt;/p&gt; &lt;p&gt;&lt;input type="submit" value="submit" id="add" /&gt;&lt;/p&gt; &lt;div id="message"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; create comments database12345678910111213141516171819202122&lt;?phpheader("Content-type:text/html;charset=utf-8"); $servername = "localhost";$username = "root";$password = "root";// connect$conn = mysqli_connect($servername, $username, $password);mysqli_set_charset($conn,'utf8'); //utf-8// check if (!$conn) &#123; die("error " . mysqli_connect_error());&#125;// create database$sql = "CREATE DATABASE comments";if (mysqli_query($conn, $sql)) &#123; echo "s";&#125; else &#123; echo "e " . mysqli_error($conn);&#125;mysqli_close($conn);?&gt; 12345678910111213$sql = "CREATE TABLE `comments` ( `id` int(11) NOT NULL auto_increment, `user` varchar(30) NOT NULL, `comment` varchar(200) NOT NULL, `addtime` datetime NOT NULL, PRIMARY KEY (`id`)) ENGINE=MyISAM; " ;if (mysqli_query($conn, $sql)) &#123; echo "s";&#125; else &#123; echo "e " . mysqli_error($conn);&#125;mysqli_close($conn); server.php1234567891011&lt;?phpheader("Content-type:text/html;charset=utf-8"); $conn=mysqli_connect("localhost","root","root","comments");mysqli_set_charset($conn,"utf8");$sql="SELECT * from comments";$que=mysqli_query($conn,$sql);while($row=mysqli_fetch_array($que))&#123; $comments[] = array("id"=&gt;$row[id],"user"=&gt;$row[user],"comment"=&gt;$row[comment],"addtime"=&gt;$row[addtime]);&#125;echo json_encode($comments);?&gt; comment.php12345678910111213141516171819&lt;?phpheader("Content-type:text/html;charset=utf-8"); $user = htmlspecialchars(trim($_POST['user']));$txt = htmlspecialchars(trim($_POST['txt']));$time = date("Y-m-d H:i:s");if(empty($user))&#123; echo "username null"; exit;&#125;if(empty($txt))&#123; echo "contents null"; exit;&#125;$conn=mysqli_connect("localhost","root","root","comments");mysqli_set_charset($conn,"utf8");$sql="insert into comments(user,comment,addtime)values('$user','$txt','$time')";$que=mysqli_query($conn,$sql);if($que) echo "1";?&gt;]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP upload/download function]]></title>
    <url>%2F2017%2F08%2F20%2Fphp%20uploaddl%2F</url>
    <content type="text"><![CDATA[use PHP to build upload/download function fun_upload.php1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162&lt;?php//定义一个uploadFile函数function uploadFile($fileInfo,$path,$allowExt,$maxSize)&#123;//取出$_FILES中的数据$filename=$fileInfo["name"];$tmp_name=$fileInfo["tmp_name"];$size=$fileInfo["size"];$error=$fileInfo["error"];$type=$fileInfo["type"];//取出文件路径中文件的类型的部分$ext=pathinfo($filename,PATHINFO_EXTENSION);//确定是否存在存放图片的文件夹，没有则新建一个if (!file_exists($path)) &#123; //当目录不存在，就创建目录 mkdir($path,0777,true);//创建目录 chmod($path, 0777);//改变文件模式,所有人都有执行权限、写权限、度权限&#125;//得到唯一的文件名！防止因为文件名相同而产生覆盖$uniName=md5(uniqid(microtime(true),true)).'.'.$ext;//目标存放文件地址$destination=$path."/".$uniName;//当文件上传成功，存入临时文件夹，服务器端开始判断if ($error==0) &#123; if ($size&gt;$maxSize) &#123; exit("上传文件过大！"); &#125; if (!in_array($ext, $allowExt)) &#123; exit("非法文件类型"); &#125; if (!is_uploaded_file($tmp_name)) &#123; exit("上传方式有误，请使用post方式"); &#125; //判断是否为真实图片（防止伪装成图片的病毒一类的 if (!getimagesize($tmp_name)) &#123;//getimagesize真实返回数组，否则返回false exit("不是真正的图片类型"); &#125; if (@move_uploaded_file($tmp_name, $destination)) &#123;//@错误抑制符，不让用户看到警告 echo "文件".$filename."上传成功!"; &#125;else&#123; echo "文件".$filename."上传失败!"; &#125;&#125;else&#123; switch ($error)&#123; case 1: echo "超过了上传文件的最大值，请上传2M以下文件"; break; case 2: echo "上传文件过多，请一次上传20个及以下文件！"; break; case 3: echo "文件并未完全上传，请再次尝试！"; break; case 4: echo "未选择上传文件！"; break; case 7: echo "没有临时文件夹"; break; &#125;&#125;return $destination;&#125;?&gt; upload.html1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt; &lt;meta name="format-detection" content="telephone=no" /&gt; &lt;title&gt;文件上传(客户端限制)&lt;/title&gt;&lt;meta charset="utf-8" /&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="upload3.php" method="post" enctype="multipart/form-data"&gt;&lt;input type="hidden" name="MAX_FILE_SIZE" value="101321" /&gt;请选择您要上传的文件：&lt;input type="file" name="myFile" accept="image/jpeg,image/gif,text/html"/&gt;&lt;br/&gt;&lt;input type="submit" value="上传"/&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; upload3.php1234567891011&lt;?phpheader('content-type:text/html;charset=utf-8');//初始化相关变量$fileInfo=$_FILES["myFile"];$maxSize=10485760;//10M,10*1024*1024$allowExt=array('jpeg','jpg','png','tif');$path="uploads";//引入前面封装了的上传函数fun_upload.phpinclude_once 'fun_upload.php';uploadFile($fileInfo, $path, $allowExt, $maxSize);?&gt; multiple upload123456789101112131415161718&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt; &lt;meta name="format-detection" content="telephone=no" /&gt; &lt;meta charset="utf-8" /&gt;&lt;title&gt;多文件上传&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;form action="upload4.php" method="post" enctype="multipart/form-data"&gt;请选择您要上传的文件：&lt;input type="file" name="myFile1" /&gt;&lt;br/&gt;请选择您要上传的文件：&lt;input type="file" name="myFile2" /&gt;&lt;br/&gt;请选择您要上传的文件：&lt;input type="file" name="myFile3" /&gt;&lt;br/&gt;请选择您要上传的文件：&lt;input type="file" name="myFile4" /&gt;&lt;br/&gt;&lt;input type="submit" value="上传"/&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; upload4.php1234567891011&lt;?php//echo "&lt;pre&gt;";//print_r($_FILES);//echo "&lt;/pre&gt;";//exit;header('content-type:text/html;charset=utf-8');include_once 'fun_upload.php';foreach ($_FILES as $fileInfo)&#123; $file[]=uploadFile($fileInfo);&#125;?&gt; changes in fun_upload.php1234567function uploadFile( $fileInfo,$path="uploads",$allowExt=array('jpeg','jpg','png','tif'),$maxSize=10485760)&#123;$filename=$fileInfo["name"];$tmp_name=$fileInfo["tmp_name"];$size=$fileInfo["size"];$error=$fileInfo["error"];$type=$fileInfo["type"]; download.php12345678910111213141516171819202122232425262728293031&lt;?php//获取传递过来的路径信息$filename=$_GET['filename'];//判断是否有值，没有则不执行下面的php语句if($filename)&#123; header("Content-Disposition:attachment;filename=download_$filename"); //Content-disposition 是 MIME 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件。 //格式：content-disposition = "Content-Disposition" ":" disposition-type *( ";" disposition-parm //Content-Disposition为属性名 //disposition-type是以什么方式下载，如attachment为以附件方式下载 //disposition-parm为默认保存时的文件名 readfile($filename); exit;&#125;?&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt; &lt;meta name="format-detection" content="telephone=no" /&gt; &lt;title&gt;文件下载&lt;/title&gt;&lt;meta charset="utf-8" /&gt;&lt;/head&gt;&lt;body&gt;&lt;a href="1.rar"&gt;下载1.rar&lt;/a&gt;&lt;br /&gt;&lt;a href="1.jpg"&gt;下载1.jpg&lt;/a&gt;&lt;br /&gt;&lt;a href="download.php?filename=1.jpg"&gt;通过程序下载1.jpg&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP MYSQL database function]]></title>
    <url>%2F2017%2F08%2F20%2FPHP%20MYSQL%20%2F</url>
    <content type="text"><![CDATA[some function about how to use PHP and MYSQL database PHP and MYSQLconnect to mysql server123456789101112&lt;?php$dbhost = 'localhost'; // server$dbuser = 'root'; // username$dbpass = '123456'; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('Could not connect: ' . mysqli_error());&#125;echo 'yes';mysqli_close($conn);?&gt; creat database12345678910111213141516171819&lt;?php$dbhost = 'localhost:3306'; // server$dbuser = 'root'; // username$dbpass = '123456'; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('error ' . mysqli_error($conn));&#125;echo 'connect yes';$sql = 'CREATE DATABASE RUNOOB';$retval = mysqli_query($conn,$sql );if(! $retval )&#123; die('error ' . mysqli_error($conn));&#125;echo "yes";mysqli_close($conn);?&gt; delete database1$sql = 'DROP DATABASE RUNOOB'; select database12345678910111213&lt;?php$dbhost = 'localhost'; // server$dbuser = 'root'; // username$dbpass = '123456'; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('Could not connect: ' . mysqli_error());&#125;echo 'yes';mysqli_select_db($conn, 'RUNOOB' );mysqli_close($conn);?&gt; create database table1234567891011121314151617181920212223242526&lt;?php$dbhost = 'localhost'; // server$dbuser = 'root'; // username$dbpass = ''; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('error ' . mysqli_error($conn));&#125;echo 'connect yes';$sql = "CREATE TABLE runoob_tbl( ". "runoob_id INT NOT NULL AUTO_INCREMENT, ". "runoob_title VARCHAR(100) NOT NULL, ". "runoob_author VARCHAR(40) NOT NULL, ". "submission_date DATE, ". "PRIMARY KEY ( runoob_id ))ENGINE=InnoDB DEFAULT CHARSET=utf8; ";mysqli_select_db( $conn, 'RUNOOB' );$retval = mysqli_query( $conn, $sql );if(! $retval )&#123; die('error: ' . mysqli_error($conn));&#125;echo "success";mysqli_close($conn);?&gt; delete database table12345678$sql = "DROP TABLE runoob_tbl";mysqli_select_db( $conn, 'RUNOOB' );$retval = mysqli_query( $conn, $sql );if(! $retval )&#123; die('error ' . mysqli_error($conn));&#125;echo "success"; insert data123456789101112131415161718192021222324252627282930313233&lt;?php$dbhost = 'localhost'; // server$dbuser = 'root'; // username$dbpass = ''; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('error ' . mysqli_error($conn));&#125;echo 'connect yes';// Chinesemysqli_query($conn , "set names utf8"); $runoob_title = 'ѧϰ Python';$runoob_author = 'RUNOOB.COM';$submission_date = '2016-03-06'; $sql = "INSERT INTO runoob_tbl ". "(runoob_title,runoob_author, submission_date) ". "VALUES ". "('$runoob_title','$runoob_author','$submission_date')"; mysqli_select_db( $conn, 'RUNOOB' );$retval = mysqli_query( $conn, $sql );if(! $retval )&#123; die('u' . mysqli_error($conn));&#125;echo "s";mysqli_close($conn);?&gt; search data1234567891011121314151617181920212223242526272829303132333435&lt;?php$dbhost = 'localhost'; // server$dbuser = 'root'; // username$dbpass = ''; // password$conn = mysqli_connect($dbhost, $dbuser, $dbpass);if(! $conn )&#123; die('error ' . mysqli_error($conn));&#125;echo 'connect yes';// Chinesemysqli_query($conn , "set names utf8");$sql = 'SELECT runoob_id, runoob_title, runoob_author, submission_date FROM runoob_tbl'; mysqli_select_db( $conn, 'RUNOOB' );$retval = mysqli_query( $conn, $sql );if(! $retval )&#123; die('unable ' . mysqli_error($conn));&#125;echo '&lt;h2&gt;mysqli_fetch_assoc test&lt;h2&gt;';echo '&lt;table border="1"&gt;&lt;tr&gt;&lt;td&gt;rn ID&lt;/td&gt;&lt;td&gt;title&lt;/td&gt;&lt;td&gt;author&lt;/td&gt;&lt;td&gt;date&lt;/td&gt;&lt;/tr&gt;';while($row = mysqli_fetch_assoc($retval))&#123; echo "&lt;tr&gt;&lt;td&gt; &#123;$row['runoob_id']&#125;&lt;/td&gt; ". "&lt;td&gt;&#123;$row['runoob_title']&#125; &lt;/td&gt; ". "&lt;td&gt;&#123;$row['runoob_author']&#125; &lt;/td&gt; ". "&lt;td&gt;&#123;$row['submission_date']&#125; &lt;/td&gt; ". "&lt;/tr&gt;";&#125;echo '&lt;/table&gt;';mysqli_close($conn);?&gt; 123456789101112131415161718192021222324252627&lt;?php$servername = "localhost";$username = "username";$password = "password";$dbname = "myDB";// Create connection$conn = mysqli_connect($servername, $username, $password, $dbname);// Check connectionif (!$conn) &#123; die("Connection failed: " . mysqli_connect_error());&#125;$sql = "SELECT id, firstname, lastname FROM MyGuests";$result = mysqli_query($conn, $sql);if (mysqli_num_rows($result) &gt; 0) &#123; // output data of each row while($row = mysqli_fetch_assoc($result)) &#123; echo "id: " . $row["id"]. " - Name: " . $row["firstname"]. " " . $row["lastname"]. "&lt;br&gt;"; &#125;&#125; else &#123; echo "0 results";&#125;mysqli_close($conn);?&gt; 1234567891011121314151617181920212223$sql = 'SELECT runoob_id, runoob_title, runoob_author, submission_date FROM runoob_tbl'; mysqli_select_db( $conn, 'RUNOOB' );$retval = mysqli_query( $conn, $sql );if(! $retval )&#123; die('�޷���ȡ����: ' . mysqli_error($conn));&#125;echo '&lt;h2&gt;�����̳� mysqli_fetch_array ����&lt;h2&gt;';echo '&lt;table border="1"&gt;&lt;tr&gt;&lt;td&gt;�̳� ID&lt;/td&gt;&lt;td&gt;����&lt;/td&gt;&lt;td&gt;����&lt;/td&gt;&lt;td&gt;�ύ����&lt;/td&gt;&lt;/tr&gt;';while($row = mysqli_fetch_array($retval, MYSQL_NUM))&#123; echo "&lt;tr&gt;&lt;td&gt; &#123;$row[0]&#125;&lt;/td&gt; ". "&lt;td&gt;&#123;$row[1]&#125; &lt;/td&gt; ". "&lt;td&gt;&#123;$row[2]&#125; &lt;/td&gt; ". "&lt;td&gt;&#123;$row[3]&#125; &lt;/td&gt; ". "&lt;/tr&gt;";&#125;echo '&lt;/table&gt;';mysqli_close($conn);?&gt; free internal memory123mysqli_free_result($retval);mysqli_close($conn); Delete Data From MySQL123456789$sql = "DELETE FROM MyGuests WHERE id=3";if (mysqli_query($conn, $sql)) &#123; echo "Record deleted successfully";&#125; else &#123; echo "Error deleting record: " . mysqli_error($conn);&#125;mysqli_close($conn); Update Data in MySQL123456789$sql = "UPDATE MyGuests SET lastname='Doe' WHERE id=2";if (mysqli_query($conn, $sql)) &#123; echo "Record updated successfully";&#125; else &#123; echo "Error updating record: " . mysqli_error($conn);&#125;mysqli_close($conn); where syntax1234$sql = 'SELECT runoob_id, runoob_title, runoob_author, submission_date FROM runoob_tbl WHERE runoob_author="RUNOOB.COM"'; like syntax1234$sql = 'SELECT runoob_id, runoob_title, runoob_author, submission_date FROM runoob_tbl WHERE runoob_author LIKE "%COM"';// % means any MySQL UNION1234567SELECT expression1, expression2, ... expression_nFROM tables[WHERE conditions]UNION [ALL | DISTINCT]SELECT expression1, expression2, ... expression_nFROM tables[WHERE conditions]; different country1234SELECT country FROM WebsitesUNIONSELECT country FROM appsORDER BY country; all country1234SELECT country FROM WebsitesUNION ALLSELECT country FROM appsORDER BY country; 123456SELECT country, name FROM WebsitesWHERE country='CN'UNION ALLSELECT country, app_name FROM appsWHERE country='CN'ORDER BY country; order by1234567SELECT field1, field2,...fieldN table_name1, table_name2...ORDER BY field1, [field2...] [ASC [DESC]]SELECT runoob_id, runoob_title, runoob_author, submission_dateFROM runoob_tblORDER BY submission_date ASC'; GROUP BY12345678SELECT column_name, function(column_name)FROM table_nameWHERE column_name operator valueGROUP BY column_name;mysql&gt; SELECT name, COUNT(*) FROM employee_tbl GROUP BY name;mysql&gt; SELECT name, SUM(singin) as singin_count FROM employee_tbl GROUP BY name WITH ROLLUP; INNER JOIN1$sql = 'SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a INNER JOIN tcount_tbl b ON a.runoob_author = b.runoob_author'; NULL123456789101112if( isset($runoob_count ))&#123; $sql = "SELECT runoob_author, runoob_count FROM runoob_test_tbl WHERE runoob_count = $runoob_count";&#125;else&#123; $sql = "SELECT runoob_author, runoob_count FROM runoob_test_tbl WHERE runoob_count IS NULL";&#125; ALTER12345mysql&gt; ALTER TABLE testalter_tbl MODIFY c CHAR(10);mysql&gt; ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;mysql&gt; ALTER TABLE testalter_tbl ENGINE = MYISAM;;mysql&gt; SHOW TABLE STATUS LIKE 'testalter_tbl'\G index [links] (http://www.runoob.com/mysql/mysql-index.html) clone table [links] (http://www.runoob.com/mysql/mysql-clone-tables.html) database export12mysql&gt; SELECT * FROM runoob_tbl -&gt; INTO OUTFILE '/tmp/tutorials.txt'; database import1mysql&gt; LOAD DATA LOCAL INFILE 'dump.txt' INTO TABLE mytbl; handling duplicates [links] (http://www.runoob.com/mysql/mysql-handling-duplicates.html) using sequences [links] (http://www.runoob.com/mysql/mysql-using-sequences.html) sql injection [links] (http://www.runoob.com/mysql/mysql-sql-injection.html) database info [links] (http://www.runoob.com/mysql/mysql-database-info.html)]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python web crawling(1)]]></title>
    <url>%2F2017%2F08%2F20%2Fpython%20%E7%88%AC%E8%99%AB%E4%BE%8B%E5%AD%90%2F</url>
    <content type="text"><![CDATA[web crawling examples with python using urllib,beautifulsoup,re,requests, python3.6爬取糗事百科热门帖子例子/web crawling qiushibaike.com using python3.6123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293#coding:utf-8import urllibimport reimport urllib.requestimport _threadimport timeclass QSBK: #初始化方法，定义一些变量 def __init__(self): self.pageIndex = 1 self.user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)' self.headers = &#123;'User-agent':self.user_agent&#125; #存放段子的变量，每一个元素是每一页的段子们 self.stories = [] #存放变量是否继续运行的变量 self.enable = False def getPage(self,pageIndex):#获取页面的HTML文件内容 try: url = 'https://www.qiushibaike.com/hot/' + str(pageIndex) req = urllib.request.Request(url,headers=self.headers) response = urllib.request.urlopen(req) pageCode = response.read().decode('utf-8') return pageCode except urllib.error.URLError as e: if hasattr(e, "reason"): print("连接糗事百科失败，原因：",e.reason) return None def getPageItems(self,pageIndex): #解析HTML文件 pageCode = self.getPage(pageIndex) if not pageCode: print('页面加载失败。。。') return None #用正则表达式匹配出作者，段子内容，段子里面的图片，点赞数 pattern = re.compile( '&lt;div.*?author clearfix"&gt;.*?&lt;a.*?&lt;h2.*?&gt;(.*?)&lt;/h2&gt;.*?&lt;div.*?content"&gt;.*?&lt;span.*?&gt;(.*?)&lt;/span&gt;(.*?)' '&lt;div class="stats.*?class="number"&gt;(.*?)&lt;/i&gt;', re.S) items = re.findall(pattern, pageCode) pageStories = [] #遍历items，找出不含img的段子 for item in items: haveImg = re.search("img", item[2]) if not haveImg: #除去字符br replaceBR = re.compile('&lt;br/&gt;') text = re.sub(replaceBR,"\n",item[1]) pageStories.append([item[0].strip(),text.strip(),item[2].strip(),item[3].strip()]) return pageStories #判断页数，从第一页开始输出 def loadPage(self): if self.enable == True: if len(self.stories) &lt; 2: pageStories = self.getPageItems(self.pageIndex) if pageStories: self.stories.append(pageStories) self.pageIndex += 1 #每次输出一个段子 def getOneStory(self,pageStories,page): #遍历pageStories for story in pageStories: i = input() self.loadPage() if i == "Q": self.enable = False return print(u"第%d页\n发布人:%s\n赞:%s\n%s"%(page,story[0],story[3],story[1])) #主程序 def start(self): print(u"正在读取糗事百科，按回车键查看新段子，Q退出") self.enable = True self.loadPage() nowpage = 0 while self.enable: if len(self.stories)&gt;0: pageStories = self.stories[0] nowpage += 1 del self.stories[0] self.getOneStory(pageStories,nowpage)#程序入口if __name__=="__main__": spider = QSBK() spider.start() repost python2.7爬取百度贴吧帖子/web crawling tieba.baidu.com using python2.7123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149#/usr/bin/env python# -*- coding: UTF-8 -*-import urllibimport urllib2import re#处理页面标签类class Tool: #去除img标签,7位长空格 removeImg = re.compile('&lt;img.*?&gt;| &#123;7&#125;|') #删除超链接标签 removeAddr = re.compile('&lt;a.*?&gt;|&lt;/a&gt;') #把换行的标签换为\n replaceLine = re.compile('&lt;tr&gt;|&lt;div&gt;|&lt;/div&gt;|&lt;/p&gt;') #将表格制表&lt;td&gt;替换为\t replaceTD= re.compile('&lt;td&gt;') #把段落开头换为\n加空两格 replacePara = re.compile('&lt;p.*?&gt;') #将换行符或双换行符替换为\n replaceBR = re.compile('&lt;br&gt;&lt;br&gt;|&lt;br&gt;') #将其余标签剔除 removeExtraTag = re.compile('&lt;.*?&gt;') def replace(self,x): x = re.sub(self.removeImg,"",x) x = re.sub(self.removeAddr,"",x) x = re.sub(self.replaceLine,"\n",x) x = re.sub(self.replaceTD,"\t",x) x = re.sub(self.replacePara,"\n ",x) x = re.sub(self.replaceBR,"\n",x) x = re.sub(self.removeExtraTag,"",x) #strip()将前后多余内容删除 return x.strip()#百度贴吧爬虫类class BDTB: #初始化，传入基地址，是否只看楼主的参数 def __init__(self,baseUrl,seeLZ,floorTag): #base链接地址 self.baseURL = baseUrl #是否只看楼主 self.seeLZ = '?see_lz='+str(seeLZ) #HTML标签剔除工具类对象 self.tool = Tool() #全局file变量，文件写入操作对象 self.file = None #楼层标号，初始为1 self.floor = 1 #默认的标题，如果没有成功获取到标题的话则会用这个标题 self.defaultTitle = u"百度贴吧" #是否写入楼分隔符的标记 self.floorTag = floorTag #传入页码，获取该页帖子的代码 def getPage(self,pageNum): try: #构建URL url = self.baseURL+ self.seeLZ + '&amp;pn=' + str(pageNum) request = urllib2.Request(url) response = urllib2.urlopen(request) #返回UTF-8格式编码内容 return response.read().decode('utf-8') #无法连接，报错 except urllib2.URLError, e: if hasattr(e,"reason"): print u"连接百度贴吧失败,错误原因",e.reason return None #获取帖子标题 def getTitle(self,page): #得到标题的正则表达式 pattern = re.compile('&lt;h3 class="core_title_txt.*?&gt;(.*?)&lt;/h1&gt;',re.S) result = re.search(pattern,page) if result: #如果存在，则返回标题 return result.group(1).strip() else: return None #获取帖子一共有多少页 def getPageNum(self,page): #获取帖子页数的正则表达式 pattern = re.compile('&lt;li class="l_reply_num.*?&lt;/span&gt;.*?&lt;span.*?&gt;(.*?)&lt;/span&gt;',re.S) result = re.search(pattern,page) if result: return result.group(1).strip() else: return None #获取每一层楼的内容,传入页面内容 def getContent(self,page): #匹配所有楼层的内容 pattern = re.compile('&lt;div id="post_content_.*?&gt;(.*?)&lt;/div&gt;',re.S) items = re.findall(pattern,page) contents = [] for item in items: #将文本进行去除标签处理，同时在前后加入换行符 content = "\n"+self.tool.replace(item)+"\n" contents.append(content.encode('utf-8')) return contents def setFileTitle(self,title): #如果标题不是为None，即成功获取到标题 if title is not None: self.file = open(title + ".txt","w+") else: self.file = open(self.defaultTitle + ".txt","w+") def writeData(self,contents): #向文件写入每一楼的信息 for item in contents: if self.floorTag == '1': #楼之间的分隔符 floorLine = "\n" + str(self.floor) + u"-----------------------------------------------------------------------------------------\n" self.file.write(floorLine) self.file.write(item) self.floor += 1 def start(self): indexPage = self.getPage(1) pageNum = self.getPageNum(indexPage) title = self.getTitle(indexPage) self.setFileTitle(title) if pageNum == None: print "URL已失效，请重试" return try: print "该帖子共有" + str(pageNum) + "页" for i in range(1,int(pageNum)+1): print "正在写入第" + str(i) + "页数据" page = self.getPage(i) contents = self.getContent(page) self.writeData(contents) #出现写入异常 except IOError,e: print "写入异常，原因" + e.message finally: print "写入任务完成"print u"请输入帖子代号"baseURL = 'http://tieba.baidu.com/p/' + str(raw_input(u'http://tieba.baidu.com/p/'))seeLZ = raw_input("是否只获取楼主发言，是输入1，否输入0\n")floorTag = raw_input("是否写入楼层信息，是输入1，否输入0\n")bdtb = BDTB(baseURL,seeLZ,floorTag)bdtb.start() repost 爬取妹子图照片/web crawling mzitu.com using python3.61234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556from bs4 import BeautifulSoupimport osimport requestsclass mzitu(): def all_url(self, url): html = self.request(url)##调用request函数把套图地址传进去会返回给我们一个response all_a = BeautifulSoup(html.text, 'lxml').find('div', class_='all').find_all('a') for a in all_a: title = a.get_text() print(u'开始保存：', title) ##加点提示不然太枯燥了 path = str(title).replace("?", '_') ##我注意到有个标题带有 ？ 这个符号Windows系统是不能创建文件夹的所以要替换掉 self.mkdir(path) ##调用mkdir函数创建文件夹！这儿path代表的是标题title哦！！！！！不要糊涂了哦！ href = a['href'] self.html(href) ##调用html函数把href参数传递过去！href是啥还记的吧？ 就是套图的地址哦！！不要迷糊了哦！ def html(self, href): ##这个函数是处理套图地址获得图片的页面地址 html = self.request(href) max_span = BeautifulSoup(html.text, 'lxml').find('div', class_='pagenavi').find_all('span')[-2].get_text() for page in range(1, int(max_span) + 1): page_url = href + '/' + str(page) self.img(page_url) ##调用img函数 def img(self, page_url): ##这个函数处理图片页面地址获得图片的实际地址 img_html = self.request(page_url) img_url = BeautifulSoup(img_html.text, 'lxml').find('div', class_='main-image').find('img')['src'] self.save(img_url) def save(self, img_url): ##这个函数保存图片 name = img_url[-9:-4] img = self.request(img_url) f = open(name + '.jpg', 'ab') f.write(img.content) f.close() def mkdir(self, path): ##这个函数创建文件夹 path = path.strip() isExists = os.path.exists(os.path.join("D:\mzitu", path)) if not isExists: print(u'建了一个名字叫做', path, u'的文件夹！') os.makedirs(os.path.join("D:\mzitu", path)) os.chdir(os.path.join("D:\mzitu", path)) ##切换到目录 return True else: print(u'名字叫做', path, u'的文件夹已经存在了！') return False def request(self, url): headers = &#123; 'Referer': url, 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36'&#125; content = requests.get(url, headers=headers) return content Mzitu = mzitu() ##实例化Mzitu.all_url('http://www.mzitu.com/all') ##给函数all_url传入参数 你可以当作启动爬虫（就是入口） repost python3.6爬取豆瓣上映电影评分/web crawling douban.com using python3.61234567891011121314151617import requestsfrom bs4 import BeautifulSoupheaders = &#123;'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"&#125;##浏览器请求头（大部分网站没有这个请求头会报错、请务必加上哦）all_url = 'https://movie.douban.com/nowplaying/beijing/' ##开始的URL地址start_html = requests.get(all_url, headers=headers) soup = BeautifulSoup(start_html.text, 'lxml')nowplaying_movie = soup.find_all('div', id='nowplaying')nowplaying_movie_list = nowplaying_movie[0].find_all('li', class_='list-item')nowplaying_list = [] for item in nowplaying_movie_list: nowplaying_dict = &#123;&#125; nowplaying_dict['id'] = item['data-subject'] nowplaying_dict['score'] = item['data-score'] for tag_img_item in item.find_all('img'): nowplaying_dict['name'] = tag_img_item['alt'] nowplaying_list.append(nowplaying_dict)print(nowplaying_list) 12345678910111213import requestsfrom bs4 import BeautifulSoupheaders = &#123;'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"&#125;##浏览器请求头（大部分网站没有这个请求头会报错、请务必加上哦）all_url = 'https://movie.douban.com/subject/26363254/comments' ##开始的URL地址start_html = requests.get(all_url, headers=headers) soup = BeautifulSoup(start_html.text, 'lxml')comment_div_lits = soup.find_all('div', class_='comment')eachCommentList = []; for item in comment_div_lits: if item.find_all('p')[0].string is not None: eachCommentList.append(item.find_all('p')[0].string)print(eachCommentList) repost taobao search web crawling using python3.6# encoding=utf8 import requests import re #获取text def getHTMLText(url): try: r = requests.get(url, timeout = 30) r.raise_for_status() r.encoding= r.apparent_encoding return r.text except: return "" def paserPage(list,html): try: plt = re.findall(r'\"view_price\"\:\"[\d.]*\"',html) tlt = re.findall(r'\"raw_title\"\:\".*?\"',html) for i in range(len(plt)): price = eval(plt[i].split(':')[1]) title = eval(tlt[i].split(':')[1]) list.append([price,title]) except: print("出丑") def printGoodsList(list): tplt ="{:4}\t{:8}\t{:16}" print(tplt.format("序号", "价格", "商品")) count = 0 for g in list: count=count+1 print(tplt.format(count,g[0],g[1])) def main(): goods = '羽绒服' depth = 3 #爬取页数 start_url = 'https://s.taobao.com/search?q=' + goods + '&amp;sort=sale-desc' infoList = [] for i in range(depth): try: url = start_url + '&amp;s=' + str(44*i) html = getHTMLText(url) #print(html) paserPage(infoList,html) except: continue #print(infoList) printGoodsList(infoList) main() repost]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python web crawling(2)]]></title>
    <url>%2F2017%2F08%2F20%2Fpython(2)%2F</url>
    <content type="text"><![CDATA[web crawling examples with python using urllib,beautifulsoup,re,requests, web crawling shuaia.net images using python3.612345678910111213141516171819202122232425262728293031323334353637383940414243444546474849# -*- coding:UTF-8 -*-from bs4 import BeautifulSoupfrom urllib.request import urlretrieveimport requestsimport osimport timeif __name__ == '__main__':list_url = []for num in range(1,3): if num == 1: url = 'http://www.shuaia.net/index.html' else: url = 'http://www.shuaia.net/index_%d.html' % num headers = &#123; "User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36" &#125; req = requests.get(url = url,headers = headers) req.encoding = 'utf-8' html = req.text bf = BeautifulSoup(html, 'lxml') targets_url = bf.find_all(class_='item-img') for each in targets_url: list_url.append(each.img.get('alt') + '=' + each.get('href'))print('连接采集完成')for each_img in list_url: img_info = each_img.split('=') target_url = img_info[1] filename = img_info[0] + '.jpg' print('下载：' + filename) headers = &#123; "User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36" &#125; img_req = requests.get(url = target_url,headers = headers) img_req.encoding = 'utf-8' img_html = img_req.text img_bf_1 = BeautifulSoup(img_html, 'lxml') img_url = img_bf_1.find_all('div', class_='wr-single-content-list') img_bf_2 = BeautifulSoup(str(img_url), 'lxml') img_url = 'http://www.shuaia.net' + img_bf_2.div.img.get('src') if 'images' not in os.listdir(): os.makedirs('images') urlretrieve(url = img_url,filename = 'images/' + filename) time.sleep(1)print('下载完成！') repost web crawling douban.com/top250 using python3.61234567891011121314151617181920from bs4 import BeautifulSoupimport requestsheaders = &#123;'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"&#125;##浏览器请求头（大部分网站没有 这个请求头会报错、请务必加上哦）all_url = 'https://movie.douban.com/top250?start=' ##开始的URL地址num = 0while num &lt; 250: all_url = all_url + str(num) num = num +25 start_html = requests.get(all_url, headers=headers) soup = BeautifulSoup(start_html.text, 'lxml') dmn = soup.find_all('div', class_='hd') dmr = soup.find_all('div',class_='bd') dbm =[] for item in dmn : dbm.append(item.find_all('span')[0].string) for item in dmr : dbm.append(item.find_all('span')[1].string) print(dbm) if num &gt; 250: break 原创文章转载请注明出处 crawling image.baidu.com using python3.612345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364import requestsimport osdef getManyPages(keyword,pages): params=[] for i in range(30,30*pages+30,30): params.append(&#123; 'tn': 'resultjson_com', 'ipn': 'rj', 'ct': 201326592, 'is': '', 'fp': 'result', 'queryWord': keyword, 'cl': 2, 'lm': -1, 'ie': 'utf-8', 'oe': 'utf-8', 'adpicid': '', 'st': -1, 'z': '', 'ic': 0, 'word': keyword, 's': '', 'se': '', 'tab': '', 'width': '', 'height': '', 'face': 0, 'istype': 2, 'qc': '', 'nc': 1, 'fr': '', 'pn': i, 'rn': 30, 'gsm': '1e', '1488942260214': '' &#125;) url = 'https://image.baidu.com/search/acjson' urls = [] for i in params: urls.append(requests.get(url,params=i).json().get('data')) return urlsdef getImg(dataList, localPath): if not os.path.exists(localPath): # 新建文件夹 os.mkdir(localPath) x = 0 for list in dataList: for i in list: if i.get('thumbURL') != None: print('正在下载：%s' % i.get('thumbURL')) ir = requests.get(i.get('thumbURL')) open(localPath + '%d.jpg' % x, 'wb').write(ir.content) x += 1 else: print('图片链接不存在')if __name__ == '__main__': dataList = getManyPages('王尼玛',10) # 参数1:关键字，参数2:要下载的页数 getImg(dataList,'d:/NBA录像/') # 参数2:指定保存的路径 repost crawl douban.com/tags/ using python3.612345678910111213141516171819202122232425import requestsimport timeimport json#from bs4 import BeautifulSoupheaders = &#123;'User-Agent':"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"&#125;url = 'https://movie.douban.com/j/new_search_subjects?'params =&#123;'sort':'T','range':'0,10','tags':'','start':'0'&#125;start_html = requests.post(url, data=params, headers=headers)htmlcontent=start_html.content.decode('utf-8')data = json.loads(htmlcontent.strip())title_n = data['data']num = 0title_nmb = []while num &lt; 2: title_nm = &#123;&#125; title_nm['名称'] = title_n[num]['title'] title_nm['评分'] = title_n[num]['rate'] num = num + 1 title_nmb.append(title_nm) time.sleep(5) if num &gt; 2: breakprint(title_nmb)]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP 水印和缩略图]]></title>
    <url>%2F2017%2F08%2F19%2Fphp%20%E6%B0%B4%E5%8D%B0%2F</url>
    <content type="text"><![CDATA[php实现水印和缩略图功能 添加文字水印12345678910111213141516171819202122232425262728293031&lt;?php /*打开图片*/ //1.配置图片路径（填入你的图片路径） $src="http://img.php.cn/upload/course/000/000/004/581454f755fb1195.jpg"; //获取图片信息 $info = getimagesize($src); //通过图像的编号来获取图像的类型 $type=image_type_to_extension($info[2],false); //在内存中创建一个和我们图像类型一样的图像 $fun = "imagecreatefrom&#123;$type&#125;"; //把图片复制到我们的内存中 $image=$fun($src); /*操作图片*/ //设置字体的路径 $font="/tpl/Index/Static/css/img/fonts/Christmas.ttf"; //添加内容 $content="hello"; //设置字体的颜色和透明度 $col=imagecolorallocatealpha($image,255,255,255,30); //写入文字 imagettftext($image,20,0,20,30,$col,$font,$content); /*输出图片*/ //浏览器输出 header("Content-type:".$info['mime']); $func="image&#123;$type&#125;"; $func($image); //保存图片 $func($image,'FFF.'.$type); /*销毁图片*/ imagedestroy($image); ?&gt; 添加图片水印12345678910111213141516171819202122232425262728293031323334&lt;?php /*打开图片*/ //配置图片路径 $src = "http://img.php.cn/upload/course/000/000/004/581454f755fb1195.jpg"; //获取图片的基本信息 $info=getimagesize($src); //通过图像的编号来获取图片的类型 $type=image_type_to_extension($info[2],false); //内存中创建一个和我们图像类型一致的图像 $fun = "imagecreatefrom&#123;$type&#125;"; //把要操作的图片复制到内存中 $image=$fun($src); /*操作图片*/ //设置水印路径 $image_Mark = "http://img.php.cn/upload/course/000/000/004/5814594e3e7c9278.png"; //获取水印的基本信息 $info2=getimagesize($image_Mark); //通过水印的图像编号来获取水印的图片类型 $type2=image_type_to_extension($info2[2],false); //在内存中创建一个和水印图像一致的图像类型 $fun2="imagecreatefrom&#123;$type2&#125;"; //把水印复制到内存中 $water = $fun2($image_Mark); //合并图片 imagecopymerge($image,$water,60,40,0,0,$info2[0],$info2[1],30); //销毁水印图片 imagedestroy($water); /*输出图片*/ header("Content-type:",$info['mime']); $funs = "image&#123;$type&#125;"; $funs($image); /*销毁图片*/ imagedestroy($image);?&gt; 缩略图 1234567891011121314151617181920212223 &lt;?php/*打开图片*/$src = "http://img.php.cn/upload/course/000/000/004/5812bd10e70ef729.jpg";$info = getimagesize($src);$type = image_type_to_extension($info[2],false);$fun = "imagecreatefrom&#123;$type&#125;";$image = $fun($src);/*操作图片*///在内存中建立一个宽300高200的真色彩图片$image_thumb = imagecreatetruecolor(300,200);//将原图复制到新建的真色彩图片上，并且按照一定比例压缩(参数1：真色彩图片,参数2：原图，参数3,4,5,6：原图和真色彩图的起始点，参数7,8：原图和真色彩图的结束点，参数9：原图宽，参数10：原图高)imagecopyresampled($image_thumb,$image,0,0,0,0,300,200,$info[0],$info[1]);//销毁原始图片imagedestroy($image);/*输出图片*/header("Content-type:".$info['mime']);$funs = "image&#123;$type&#125;";$funs($image_thumb);//保存到硬盘$funs($image_thumb,"thumb_image.".$type);/*销毁图片*/imagedestroy($image_thumb);?&gt; links]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP pager function]]></title>
    <url>%2F2017%2F08%2F18%2Fphp%20pager%2F</url>
    <content type="text"><![CDATA[php和mysql开发分页 build database and table123456CREATE TABLE `test` (`id` int(11) NOT NULL auto_increment,`name` varchar(50) character set utf8 NOT NULL,`sex` varchar(2) character set utf8 NOT NULL,PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 12345678910INSERT INTO `test` (`id`, `name`, `sex`) VALUES(1, '张三', '男'),(2, '李四', '女'),(3, '王五', '男'),(4, '赵六', '女'),(5, '小七', '男'),(6, '小八', '男'),(7, '小九', '男'),(8, '小十', '女'),(9, '小十一', '男'); full code&lt;html&gt; &lt;head&gt; &lt;meta http-equiv="CONTENT-TYPE" content="text/html;"&gt; &lt;/head&gt; &lt;title&gt;分页&lt;/title&gt; &lt;style&gt; div.page{ text-align: center; } div.page a{ border: #aa0027 solid 1px; text-decoration: none; padding: 2px 5px 2px 5px; margin: 2px; } div.page span.current{ border: #000099 1px solid;background-color: #992b6c;padding: 4px 6px 4px 6px;margin: 2px;color: #fff; font-weight: bold; } div.page form{ display: inline; } div.content{ height: 200px; } &lt;/style&gt; &lt;body&gt; &lt;?php error_reporting(E_ALL ^ E_DEPRECATED); ?&gt; &lt;?php /** 1.传入页面 **/ $page= isset($_GET['p']) ? trim($_GET['p']) : 1; /** 2.根据页面取出数据：php-&gt;mysql **/ $host = "localhost"; $username = 'root'; $password = ''; $db = 'test'; $PageSize=5; $ShowPage=3; //连接数据库 $conn = new mysqli($host, $username, $password,$db); if(!$conn){ echo "数据库连接失败"; exit; } // chinese mysqli_query($conn,"set names utf8"); //编写sql获取分页数据：SELECT * FROM 表名 LIMIT 起始位置 , 显示条数 $sql = "SELECT*FROM test LIMIT ".($page-1)*$PageSize .",$PageSize"; //把sql语句传送到数据库 $result = mysqli_query($conn,$sql); //处理我们的数据 echo "&lt;div class='content'&gt;"; echo "&lt;table border=1 cellspacing=0 width=15% align='center'&gt;"; echo "&lt;tr&gt;&lt;td&gt;ID&lt;/td&gt;&lt;td&gt;名字&lt;/td&gt;&lt;td&gt;性别&lt;/td&gt;&lt;/tr&gt;"; while($row = mysqli_fetch_assoc($result)){ echo "&lt;tr&gt;"; echo "&lt;td&gt;{$row['id']}&lt;/td&gt;"; echo "&lt;td&gt;{$row['name']}&lt;/td&gt;"; echo "&lt;td&gt;{$row['sex']}&lt;/td&gt;"; echo "&lt;tr&gt;"; } echo "&lt;/table&gt;"; echo "&lt;/div&gt;"; //释放结果 mysqli_free_result($result); //获取数据总数 $to_sql="SELECT COUNT(*)FROM test"; $to_result=mysqli_fetch_array(mysqli_query($conn,$to_sql)); $to=$to_result[0]; //计算页数 $to_pages=ceil($to/$PageSize); mysqli_close($conn); /** 3.显示数据+分页条 **/ $page_banner="&lt;div class='page'&gt;"; //计算偏移量 $pageffset=($ShowPage-1)/2; if($page&gt;1){ $page_banner.="&lt;a href='".$_SERVER['PHP_SELF']."?p=1'&gt;首页&lt;/a&gt;"; $page_banner.="&lt;a href='".$_SERVER['PHP_SELF']."?p=".($page-1)."'&gt;&lt;上一页&lt;/a&gt;"; } //初始化数据 $start=1; $end=$to_pages; if ($to_pages&gt;$ShowPage){ if($page&gt;$pageffset+1){ $page_banner.="..."; } if ($page&gt;$pageffset){ $start=$page-$pageffset; $end=$to_pages&gt;$page+$pageffset?$page+$pageffset:$to_pages; }else{ $start=1; $end=$to_pages&gt;$ShowPage?$ShowPage:$to_pages; } if ($page+$pageffset&gt;$to_pages){ $start=$start-($page+$pageffset-$end); } } for($i=$start;$i&lt;=$end;$i++) { if ($page == $i) { $page_banner .= "&lt;span class='current'&gt;{$i}&lt;/span&gt;"; } else { $page_banner .= "&lt;a href='" . $_SERVER['PHP_SELF'] . "?p=" . ($i) . "'&gt;{$i}&lt;/a&gt;"; } } //尾部省略 if ($to_pages&gt;$ShowPage&amp;&amp;$to_pages&gt;$page+$pageffset){ $page_banner.="..."; } if ($page&lt;$to_pages){ $page_banner.="&lt;a href='".$_SERVER['PHP_SELF']."?p=".($page+1)."'&gt;下一页&gt;&lt;/a&gt;"; $page_banner.="&lt;a href='".$_SERVER['PHP_SELF']."?p=".($to_pages)."'&gt;尾页&lt;/a&gt;"; } $page_banner.="共{$to_pages}页"; $page_banner.="&lt;form action='mupage.php' method='get'&gt;"; $page_banner.="到第&lt;input type='text'size='2'name='p'&gt;页"; $page_banner.="&lt;input type='submit'value='确定'&gt;"; $page_banner.="&lt;/form&gt;&lt;/div&gt;"; echo $page_banner; ?&gt; &lt;/body&gt; &lt;/html&gt;]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP search function]]></title>
    <url>%2F2017%2F08%2F18%2FPHP%20search%2F</url>
    <content type="text"><![CDATA[use PHP and MYSQL to build search function searchFull Code12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;?php$keywords = isset($_GET['keywords']) ? trim($_GET['keywords']) : '';$con= new mysqli("localhost","root","","search");if (mysqli_connect_errno($con)) &#123; echo "Error: " . mysqli_connect_error(); &#125; if (!mysqli_set_charset($con, "utf8")) &#123; printf("Error loading character set utf8: %s\n", mysqli_error($con));&#125; else &#123; printf("START SEARCHING");&#125;$rs= mysqli_query($con,"SELECT * FROM user WHERE username LIKE '%&#123;$keywords&#125;%'");$users = array();//save usersif(!empty($keywords))&#123; while ($row=mysqli_fetch_assoc($rs))&#123; $row['username'] = str_replace($keywords,'&lt;font color="red"&gt;'.$keywords.'&lt;/font&gt;',$row['username']); $users[] = $row; &#125;&#125;?&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;search function&lt;/title&gt; &lt;style&gt; .textbox &#123; width: 355px; height: 40px; border-radius: 3px; border: 1px solid #e2b709; padding-left: 10px; &#125; .su &#123; width: 365px; height: 40px; background-color: #7fbdf0; color: white; border: 1px solid #666666; &#125; table&#123; background-color: #7fbdf0; line-height:25px;&#125; th&#123; background-color:#fff;&#125; td&#123; background-color:#fff; text-align:center&#125; &lt;/style&gt;&lt;/head&gt;&lt;body &gt;&lt;form action="" method="get"&gt; &lt;p&gt;&lt;input type="text" name="keywords" value="" placeholder="input"/&gt; &lt;p&gt;&lt;input type="submit" value="search"/&gt;&lt;/form&gt;&lt;?phpif ($keywords)&#123; echo '&lt;h3&gt;keywords:&lt;font color="red"&gt;'.$keywords.'&lt;/font&gt;&lt;/h3&gt;';&#125;if ($users)&#123; echo '&lt;table width="500" cellpadding="5" &gt;'; echo '&lt;tr&gt;&lt;th&gt;username&lt;/th&gt;&lt;th&gt;password&lt;/th&gt;&lt;th&gt;email&lt;/th&gt;&lt;th&gt;sex&lt;/th&gt;&lt;th&gt;hobby&lt;/th&gt;'; foreach ($users as $key=&gt;$value)&#123; echo '&lt;tr&gt;'; echo '&lt;td&gt;'.$value['username'].'&lt;/td&gt;'; echo '&lt;td&gt;'.$value['password'].'&lt;/td&gt;'; echo '&lt;td&gt;'.$value['sex'].'&lt;/td&gt;'; echo '&lt;td&gt;'.$value['email'].'&lt;/td&gt;'; echo '&lt;td&gt;'.$value['hobby'].'&lt;/td&gt;'; echo '&lt;/tr&gt;'; &#125;&#125;else&#123; echo 'None';&#125;?&gt;&lt;/body&gt;&lt;/html&gt; “Fatal error: Uncaught Error: Call to undefined function mysql_connect()”solve12345678// mysqli$mysqli = new mysqli("example.com", "user", "password", "database"); // PDO$pdo = new PDO('mysql:host=example.com;dbname=database', 'user', 'password'); // mysql$c = mysql_connect("example.com", "user", "password"); php.ini:12345678extension=php_curl.dllextension=php_gd2.dllextension=php_mbstring.dll;extension=php_mysql.dll //deleted by php7extension=php_mysqli.dllextension=php_pdo_mysql.dllextension=php_pdo_odbc.dllextension=php_xmlrpc.dll hello.php changes:1234567$dbc= new mysqli("localhost","root","root","test"); if(!$dbc) &#123; echo"error!"; &#125;else&#123; echo"success"; &#125; mysqli_close($dbc); repostlinks]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[wordpress常用函数]]></title>
    <url>%2F2017%2F08%2F18%2Fwordpress%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[写写WordPress模板常用函数，以免遗忘。 WordPress模板常用函数WordPress基本模板文件style.css : CSS(样式表)文件 index.php : 主页模板 archive.php : Archive/Category模板 404.php : Not Found 错误页模板 comments.php : 留言/回复模板 footer.php : Footer模板 header.php : Header模板 sidebar.php : 侧栏模板 page.php : 内容页(Page)模板 single.php : 内容页(Post)模板 searchform.php : 搜索表单模板 search.php : 搜索结果模板 基本条件判断Tagis_home() : 是否为主页 is_single() : 是否为内容页(Post) is_page() : 是否为内容页(Page) is_category() : 是否为Category/Archive页 is_tag() : 是否为Tag存档页 is_date() : 是否为指定日期存档页 is_year() : 是否为指定年份存档页 is_month() : 是否为指定月份存档页 is_day() : 是否为指定日存档页 is_time() : 是否为指定时间存档页 is_archive() : 是否为存档页 is_search() : 是否为搜索结果页 is_404() : 是否为 “HTTP 404: Not Found” 错误页 is_paged() : 主页/Category/Archive页是否以多页显示 Header部分常用到的PHP函数&lt;?php bloginfo(’name’); ?&gt; : 博客名称(Title) &lt;?php bloginfo(’stylesheet_url’); ?&gt; : CSS文件路径 &lt;?php bloginfo(’pingback_url’); ?&gt; : PingBack Url &lt;?php bloginfo(’template_url’); ?&gt; : 模板文件路径 &lt;?php bloginfo(’version’); ?&gt; : WordPress版本 &lt;?php bloginfo(’atom_url’); ?&gt; : Atom Url &lt;?php bloginfo(’rss2_url’); ?&gt; : RSS 2.o Url &lt;?php bloginfo(’url’); ?&gt; : 博客 Url &lt;?php bloginfo(’html_type’); ?&gt; : 博客网页Html类型 &lt;?php bloginfo(’charset’); ?&gt; : 博客网页编码 &lt;?php bloginfo(’description’); ?&gt; : 博客描述 &lt;?php wp_title(); ?&gt; : 特定内容页(Post/Page)的标题 模板常用的PHP函数及命令&lt;?php get_header(); ?&gt; : 调用Header模板 &lt;?php get_sidebar(); ?&gt; : 调用Sidebar模板 &lt;?php get_footer(); ?&gt; : 调用Footer模板 &lt;?php the_content(); ?&gt; : 显示内容(Post/Page) &lt;?php if(have_posts()) : ?&gt; : 检查是否存在Post/Page &lt;?php while(have_posts()) : the_post(); ?&gt; : 如果存在Post/Page则予以显示 &lt;?php endwhile; ?&gt; : While 结束 &lt;?php endif; ?&gt; : If 结束 &lt;?php the_time(’字符串’) ?&gt; : 显示时间，时间格式由“字符串”参数决定，具体参考PHP手册 &lt;?php comments_popup_link(); ?&gt; : 正文中的留言链接。如果使用 comments_popup_script() ，则留言会在新窗口中打开，反之，则在当前窗口打开 &lt;?php the_title(); ?&gt; : 内容页(Post/Page)标题 &lt;?php the_permalink() ?&gt; : 内容页(Post/Page) Url &lt;?php the_category(’, ‘) ?&gt; : 特定内容页(Post/Page)所属Category &lt;?php the_author(); ?&gt; : 作者 &lt;?php the_ID(); ?&gt; : 特定内容页(Post/Page) ID &lt;?php edit_post_link(); ?&gt; : 如果用户已登录并具有权限，显示编辑链接 &lt;?php get_links_list(); ?&gt; : 显示Blogroll中的链接 &lt;?php comments_template(); ?&gt; : 调用留言/回复模板 &lt;?php wp_list_pages(); ?&gt; : 显示Page列表 &lt;?php wp_list_categories(); ?&gt; : 显示Categories列表 &lt;?php next_post_link(’ %link ‘); ?&gt; : 下一篇文章链接 &lt;?php previous_post_link(’%link’); ?&gt; : 上一篇文章链接 &lt;?php get_calendar(); ?&gt; : 日历 &lt;?php wp_get_archives() ?&gt; : 显示内容存档 &lt;?php posts_nav_link(); ?&gt; : 导航，显示上一篇/下一篇文章链接 &lt;?php include(TEMPLATEPATH . ‘/文件名’); ?&gt; : 嵌入其他文件，可为定制的模板或其他类型文件 与模板相关的其他函数&lt;?php _e(’Message’); ?&gt; : 输出相应信息 &lt;?php wp_register(); ?&gt; : 显示注册链接 &lt;?php wp_loginout(); ?&gt; : 显示登录/注销链接 &lt;!–next page–&gt; : 将当前内容分页 &lt;!–more–&gt; : 将当前内容截断，以不在主页/目录页显示全部内容 &lt;?php timer_stop(1); ?&gt; : 网页加载时间(秒) &lt;?php echo get_num_queries(); ?&gt; : 网页加载查询量]]></content>
      <categories>
        <category>wordpress learning</category>
      </categories>
      <tags>
        <tag>wordpress learning</tag>
      </tags>
  </entry>
</search>
